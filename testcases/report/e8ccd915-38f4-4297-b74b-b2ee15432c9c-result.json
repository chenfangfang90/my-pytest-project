{"name": "测试数据：【0，True，0，获取成功】", "status": "failed", "statusDetails": {"message": "AssertionError: 返回消息msg校验失败\nassert '获取成功' in ''", "trace": "self = <test_get_car_check_project_list.TestGetCarCheckProjectList object at 0x105a488e0>\nproject_type = '0', except_result = True, except_code = 0, except_msg = '获取成功'\n\n    @allure.story('用例--获取验车项目列表')\n    @allure.description('该用例是针对验车项目列表测试')\n    @allure.title('测试数据：【{project_type}，{except_result}，{except_code}，{except_msg}】')\n    @pytest.mark.single\n    @pytest.mark.parametrize(\"project_type, except_result, except_code, except_msg\",\n                             api_data[\"test_get_car_check_project_list\"])\n    def test_get_car_check_project_list(self, project_type, except_result, except_code, except_msg):\n        with allure.step(\"初始化日志和测试数据\"):\n            logger.info('##################### 开始执行用例 #################')\n            allure.attach(\n                f\"测试数据：project_type={project_type}, 预期结果={except_result}, 预期code={except_code}, 预期msg={except_msg}\",\n                name=\"测试参数\",\n                attachment_type=allure.attachment_type.TEXT)\n    \n        with allure.step(\"发送请求并获取响应\"):\n            result = test_get_check_project_list(project_type)\n            # 将请求的URL和响应结果附加到报告中\n            allure.attach(f\"请求URL: {result.response.url}\", name=\"请求URL\",\n                          attachment_type=allure.attachment_type.TEXT)\n            allure.attach(f\"响应状态码: {result.response.status_code}\", name=\"状态码\",\n                          attachment_type=allure.attachment_type.TEXT)\n            allure.attach(str(result.response.json()), name=\"完整响应数据\", attachment_type=allure.attachment_type.JSON)\n    \n        step_1(project_type)  # 原有的步骤1\n    \n        with allure.step(\"验证业务状态码\"):\n            assert result.success == except_result, f\"业务状态校验失败，错误信息: {result.error}\"\n            allure.attach(f\"预期业务状态: {except_result}, 实际业务状态: {result.success}\",\n                          name=\"业务状态验证结果\",\n                          attachment_type=allure.attachment_type.TEXT)\n    \n        with allure.step(\"验证HTTP状态码\"):\n            assert result.response.status_code == 200, \"HTTP状态码校验失败\"\n            allure.attach(f\"实际HTTP状态码: {result.response.status_code}\",\n                          name=\"HTTP状态码验证结果\",\n                          attachment_type=allure.attachment_type.TEXT)\n    \n        with allure.step(\"验证返回码code\"):\n            actual_code = result.response.json().get(\"code\")\n            assert actual_code == except_code, \"返回码code校验失败\"\n            allure.attach(f\"预期code: {except_code}, 实际code: {actual_code}\",\n                          name=\"code验证结果\",\n                          attachment_type=allure.attachment_type.TEXT)\n    \n        with allure.step(\"验证返回消息（可选）\"):\n            if except_msg:\n                actual_msg = result.response.json().get(\"msg\", \"\")\n>               assert except_msg in actual_msg, \"返回消息msg校验失败\"\nE               AssertionError: 返回消息msg校验失败\nE               assert '获取成功' in ''\n\ntest_get_car_check_project_list.py:64: AssertionError"}, "description": "该用例是针对验车项目列表测试", "steps": [{"name": "初始化日志和测试数据", "status": "passed", "attachments": [{"name": "测试参数", "source": "e8f96197-9c29-4e4a-a194-41685dbcdf33-attachment.txt", "type": "text/plain"}], "start": 1743037282959, "stop": 1743037282960}, {"name": "发送请求并获取响应", "status": "passed", "attachments": [{"name": "请求URL", "source": "c72b42f1-f3b0-4fe0-8b2a-323200d35e51-attachment.txt", "type": "text/plain"}, {"name": "状态码", "source": "7dee0d5b-39ca-4849-9ba6-eb1cc9b05c9d-attachment.txt", "type": "text/plain"}, {"name": "完整响应数据", "source": "1b3fd386-b711-47d0-8956-b0e27258cdaa-attachment.json", "type": "application/json"}], "start": 1743037282960, "stop": 1743037283270}, {"name": "步骤1===>> 获取验车数据，验车类型：'0'", "status": "passed", "parameters": [{"name": "project_type", "value": "'0'"}], "start": 1743037283270, "stop": 1743037283270}, {"name": "验证业务状态码", "status": "passed", "attachments": [{"name": "业务状态验证结果", "source": "26a67cf6-47c3-404f-9f04-8c14e4ff4463-attachment.txt", "type": "text/plain"}], "start": 1743037283270, "stop": 1743037283270}, {"name": "验证HTTP状态码", "status": "passed", "attachments": [{"name": "HTTP状态码验证结果", "source": "1a0b49ce-c2c8-4ab3-96b4-f4d5a5e4498e-attachment.txt", "type": "text/plain"}], "start": 1743037283270, "stop": 1743037283270}, {"name": "验证返回码code", "status": "passed", "attachments": [{"name": "code验证结果", "source": "d62a8a3c-005c-4e31-a5dc-1a4480bee188-attachment.txt", "type": "text/plain"}], "start": 1743037283270, "stop": 1743037283271}, {"name": "验证返回消息（可选）", "status": "failed", "statusDetails": {"message": "AssertionError: 返回消息msg校验失败\nassert '获取成功' in ''\n", "trace": "  File \"/Users/yangfeng/Desktop/pytest/test-demo/testcases/test_get_car_check_project_list.py\", line 64, in test_get_car_check_project_list\n    assert except_msg in actual_msg, \"返回消息msg校验失败\"\n"}, "start": 1743037283271, "stop": 1743037283271}], "attachments": [{"name": "log", "source": "47708080-57e0-4d62-94b0-4d5b86ea0dbe-attachment.txt", "type": "text/plain"}, {"name": "stderr", "source": "e7087554-3ea2-4c7d-9c90-5208695e7668-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "project_type", "value": "'0'"}, {"name": "except_result", "value": "True"}, {"name": "except_code", "value": "0"}, {"name": "except_msg", "value": "'获取成功'"}], "start": 1743037282959, "stop": 1743037283271, "uuid": "76211ae1-b9d2-4cc5-8957-aa7a784e32a1", "historyId": "a9e90e177412af8be8ef5c341ef17546", "testCaseId": "87b0d5ce3aef7b6c40b6b25b4bdf3daf", "fullName": "testcases.test_get_car_check_project_list.TestGetCarCheckProjectList#test_get_car_check_project_list", "labels": [{"name": "severity", "value": "normal"}, {"name": "epic", "value": "针对单个接口测试"}, {"name": "feature", "value": "获取验车项目列表"}, {"name": "story", "value": "用例--获取验车项目列表"}, {"name": "tag", "value": "single"}, {"name": "parentSuite", "value": "testcases"}, {"name": "suite", "value": "test_get_car_check_project_list"}, {"name": "subSuite", "value": "TestGetCarCheckProjectList"}, {"name": "host", "value": "yangfengs-MacBook-Pro.local"}, {"name": "thread", "value": "15593-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "testcases.test_get_car_check_project_list"}]}